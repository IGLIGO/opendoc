# ComiNode 硬件通信协议 *[alpha0]()*

本文档内容描述了与蓝牙Mesh模块`ComiNode`通信的协议格式。

## 序

协议格式如下：

![](./table_temp.png)



## 测试环境

目前支持4个字节载荷用于测试。

当前模块使用一个`io`口作为测试输出。

指令`AA 55 01`将置`io`口为高，协议层完整传输内容（当随机数取00时）为：`5E 00 5E 03 5D AA 55 01 08`

指令`AA 55 00`将置`io`口为低。





## Backup

| 序号 | 内容             | 备注                     |
| :--- | :--------------- | :----------------------- |
| 0    | `0x5E`           | 固定前缀                 |
| 1    | $A_1$            | 随机数                   |
| 2    | $A_0\oplus A_1$  | 固定前缀与随机数的异或值 |
| 3    | Length           | 载荷长度                 |
| 4    | $A_2 \oplus A_3$ | 异或校验值               |
| 5~n  | Payload          | 载荷                     |
| n+1  | CheckSum         | 校验和                   |

其中，校验和为每个载荷与其序号的异或值之和。

计算公式：$$ CheckSum = \sum_5^n A_n \oplus n $$